<p class="page-title">Dimension: Version</p>

<div class="content-text">
  <div class="usecase-part">
    <div class="title-header-container">
      <span class="title-header">Description</span>
    </div>
    <span>
      A resource could have different representations of the state that it went
      through in time, [52] introduced a framework to negotiate the resource
      states through datetime negotiation, by adding the headers
      <em>Accept-Datetime</em>. The workflow could be summarized in these steps:

      <ul>
        <li>
          <b>Step 1:</b> The user agent sends an HTTP HEAD/GET against URI-R
          (<em>URI of an Original Resource</em>) that has an "Accept-Datetime"
          HTTP header with a value of the datetime of the desired state.
        </li>
        <li>
          <b>Step 2:</b> The response from URI-R includes an HTTP "Link" header
          with a Relation Type of <em>timegate</em> pointing at a URI-G (<em
            >URI of a TimeGate</em
          >) for the Original Resource.
        </li>
        <li>
          <b>Step 3:</b> The user agent sends an HTTP GET request against URI-G
          that has an "Accept-Datetime" HTTP header with a value of the desired
          datetime.
        </li>
        <li>
          <b>Step 4:</b> The response from URI-G includes a "Location" header
          pointing at a Memento URI-M (<em>URI of a Memento</em>) for the
          Original Resource.
        </li>
        <li>
          <b>Step 5:</b> The user agent sends an HTTP GET request against URI-M.
        </li>
        <li>
          <b>Step 6:</b> The response from URI-M includes a "Memento-Datetime"
          HTTP header with a value of the archival datetime of the Memento.
        </li>
      </ul>
      <span> This diagram illustrates the steps: </span>
      <img src="./assets/img/d-version.svg" alt="Version Diagram" />
    </span>
  </div>
  <hr />
  <div class="usecase-part">
    <div class="title-header-container">
      <span class="title-header">Use cases</span>
    </div>
    <span>
      <ul>
        <li>
          <a routerLink="/usecase/archive">Archiving versions.</a>
        </li>
        <li>
          <a routerLink="/usecase/smart-building">Smart Building.</a>
        </li>
      </ul>
    </span>
  </div>
  <hr />
  <div class="usecase-part">
    <div class="title-header-container">
      <span class="title-header">Examples</span>
    </div>
    <span>
      As an example the use case
      <a routerLink="/usecase/archive">Archiving versions</a>, the user agent
      sends the initial request:
      <div class="code-area">
        curl --location --request GET 'www.archive.example.com/file/45' \
        --header 'Accept-Datetime: Tue, 20 Mar 2001 20:35:00 GMT'
      </div>
      And the final URI-M answers with the response:
      <div class="code-area">
        HTTP/1.1 200 OK <br />
        Date: Thu, 25 Oct 2021 12:06:51 GMT <br />
        Memento-Datetime: Tue, 20 Mar 2001 13:36:10 GMT <br />
        Link: <http://archive.example.org/>; rel="original timegate",
        <http://a.example.org/?version=all&style=timemap> ; rel="timemap";
        type="application/link-format" ; from="Tue, 15 Sep 2011 11:28:26 GMT" ;
        until="Wed, 20 Jan 2021 09:34:33 GMT" <br />
        Content-Length: 23364 <br />
        Content-Type: text/html <br />
        ...
      </div>
      Other organization such as OCF (<em>Open Connectivity Foundation</em>)
      states in its specification that the client and server must negotiate in
      the beginning payload version to understand each other, and it defines the
      headers <em>OCF-Accept-Content-FormatVersion</em> and
      <em>OCF-Content-Format-Version</em>, in the OCFCore Specification
      <a routerLink="">[56]</a>.
    </span>
  </div>
  <hr />
  <div class="usecase-part">
    <div class="title-header-container">
      <span class="title-header">References</span>
    </div>
    <span>
      <ul>
        <li>
          <a routerLink="/reference" fragment="52" target="_blank">[52]</a>:
          HTTP framework for time-based access to resource states - memento.
        </li>
        <li>
          <a routerLink="/reference" fragment="56" target="_blank">[56]</a>:
          Open Connectivity Foundation (OCF) specification.
        </li>
      </ul>
    </span>
  </div>
</div>
